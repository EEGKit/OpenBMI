function marker_reveiced= bvr_checkparport(varargin)%BVR_CHECKPARPORT - Check that Parport is connected to BrainAmp System %%Description:% If used with no output arguments, an error produced if no proper% connection is found. Otherwise the result is returned.%%Synopsis:% bvr_checkparport(OPT)% marker_received= bvr_checkparport(OPT)%%Arguments% OPT: struct or property/value list of optional arguments%  'type': Required Marker Type, 'S' or 'R' or 'SR' if both are fine,%      default: 'SR'%  'bv_host': IP or host name of computer on which BrainVision Recorder%      is running, default 'localhost'%%Returns% marker_received: 1 is successful, 0 otherwise%%Note:% Ignore the "Warning: acquire_bv: open a connection first!"% blanker@cs.tu-berlin.de, Jul-2007opt= propertylist2struct(varargin{:});opt= set_defaults(opt, ...                  'type', 'SR', ...                  'bv_host', 'localhost', ...                  'nTriggers', 150, ...                  'trigger_on', 'R 13', ...                  'trigger_off', 'R 14');              bvr_sendcommand('viewsignalsandwait');%bbciclose;  %% just to be sure%pause(0.2);state= acquire_bv(100, opt.bv_host);pause(0.01);ii = 0;ticwhile ii < opt.nTriggers,  [dmy,bn,mp,mt,md]= acquire_bv(state);  if isequal(mt, {opt.trigger_on})%     keyboard    ii = ii + 1;    t = toc;    disp([ii toc])    tic    stimutil_waitForMarker('stopmarkers', opt.trigger_off, 'state',state);  endendtocacquire_bv('close');